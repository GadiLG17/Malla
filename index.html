<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Curricular - Arquitectura (Plan 2025)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      vertical-align: top;
      text-align: center;
    }

    th {
      background-color: #ddd;
    }

    .area {
      background-color: #e0e0e0;
      font-weight: bold;
      text-align: left;
    }

    .curso {
      position: relative;
      background: #e0e0e0; /* gris */
      border-radius: 6px;
      margin: 4px 0;
      padding: 6px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
    }

    .curso:hover {
      background-color: #d0e9f5;
    }

    .curso.llevado {
      background-color: #a7dcf1; /* celeste */
      color: #003344;
      text-decoration: line-through;
    }

    .tooltip {
      display: none;
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 100;
    }

    .curso:hover .tooltip {
      display: block;
    }

    .requisito {
      outline: 2px dashed orange;
      outline-offset: -3px;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Arquitectura (Plan 2025)</h1>
  <table>
    <thead>
      <tr>
        <th>Área / Ciclo</th>
        <th>I</th><th>II</th><th>III</th><th>IV</th><th>V</th>
        <th>VI</th><th>VII</th><th>VIII</th><th>IX</th><th>X</th>
      </tr>
    </thead>
    <tbody id="malla-body">
      <!-- Aquí se rellenarán dinámicamente los cursos -->
    </tbody>
  </table>

  <script>
    const cursosPorSemestre = {
      I: [
        { id: 'ORU', nombre: 'Orientación Universitaria', creditos: 2 },
        { id: 'CV1', nombre: 'Comunicación Verbal I', creditos: 3 },
        { id: 'MT1', nombre: 'Matemáticas I', creditos: 4 },
        { id: 'GD1', nombre: 'Geometría Descriptiva', creditos: 5 },
        { id: 'DA1', nombre: 'Dibujo Arquitectónico I', creditos: 5 },
        { id: 'IAR', nombre: 'Introducción a la Arquitectura', creditos: 3 }
      ],
      II: [
        { id: 'CV2', nombre: 'Comunicación Verbal II', creditos: 3, requiere: ['CV1'] },
        { id: 'MT2', nombre: 'Matemáticas II', creditos: 4 },
        { id: 'FG', nombre: 'Física General', creditos: 4 },
        { id: 'DA2', nombre: 'Dibujo Arquitectónico II', creditos: 5 },
        { id: 'GD2', nombre: 'Geometría Descriptiva II', creditos: 3 },
        { id: 'HA1', nombre: 'Historia de la Arquitectura I', creditos: 3 },
        { id: 'CL1', nombre: 'Crédito de Libre Configuración I', creditos: 1 }
      ],
      III: [
        { id: 'AF', nombre: 'Antropología Filosófica', creditos: 3 },
        { id: 'HI1', nombre: 'Historia del Arte I', creditos: 2 },
        { id: 'FA', nombre: 'Física Aplicada', creditos: 4 },
        { id: 'PR1', nombre: 'Proyectos I', creditos: 8 },
        { id: 'HA2', nombre: 'Historia de la Arquitectura II', creditos: 3 },
        { id: 'CT1', nombre: 'Construcción I', creditos: 2, requiere: ['FG', 'IAR'] },
        { id: 'CL2', nombre: 'Crédito de Libre Configuración II', creditos: 1 }
      ],
      IV: [
        { id: 'HI2', nombre: 'Historia del Arte II', creditos: 2 },
        { id: 'RCT', nombre: 'Realidad, Conocimiento y Trascendencia', creditos: 3, requiere: ['AF'] },
        { id: 'PR2', nombre: 'Proyectos II', creditos: 8 },
        { id: 'HA3', nombre: 'Historia de la Arquitectura III', creditos: 3 },
        { id: 'EST1', nombre: 'Estructuras I', creditos: 2, requiere: ['FA', 'MT2'] },
        { id: 'CL3', nombre: 'Crédito de Libre Configuración III', creditos: 1 },
        { id: 'ELEC1', nombre: 'Curso Electivo I', creditos: 4 },
        { id: 'HDA', nombre: 'Herramientas Digitales Aplicadas', creditos: 4 }
      ],
      V: [
        { id: 'HUR', nombre: 'Historia del Urbanismo', creditos: 2, requiere: ['PR1'] },
        { id: 'T1', nombre: 'Introducción a la Teología', creditos: 2 },
        { id: 'PR3', nombre: 'Proyectos III', creditos: 8, requiere: ['PR2'] },
        { id: 'HA4', nombre: 'Historia de la Arquitectura IV', creditos: 3, requiere: ['HA3'] },
        { id: 'CT2', nombre: 'Construcción II', creditos: 2, requiere: ['CT1', 'MT2'] },
        { id: 'CL4', nombre: 'Crédito de Libre Configuración IV', creditos: 1 },
        { id: 'COP', nombre: 'Conservación del Patrimonio', creditos: 4, requiere: ['PR2'] },
        { id: 'ELEC2', nombre: 'Curso Electivo II', creditos: 4 }
      ],
      VI: [
        { id: 'UR1', nombre: 'Urbanismo I', creditos: 4, requiere: ['HUR'] },
        { id: 'T2', nombre: 'Teología y Vida Cristiana', creditos: 2, requiere: ['T1'] },
        { id: 'PR4', nombre: 'Proyectos IV', creditos: 8, requiere: ['PR3'] },
        { id: 'ETC', nombre: 'Estética', creditos: 2, requiere: ['HA4'] },
        { id: 'EST2', nombre: 'Estructuras II', creditos: 2, requiere: ['CT1', 'EST1'] },
        { id: 'CL5', nombre: 'Crédito de Libre Configuración V', creditos: 1 },
        { id: 'ELEC3', nombre: 'Curso Electivo III', creditos: 4 },
        { id: 'GPR', nombre: 'Gestión de Proyectos', creditos: 4 }
      ],
      VII: [
        { id: 'UR2', nombre: 'Urbanismo II', creditos: 4, requiere: ['UR1'] },
        { id: 'DSO', nombre: 'Doctrina Social de la Iglesia', creditos: 2, requiere: ['T2'] },
        { id: 'PR5', nombre: 'Proyectos V', creditos: 8, requiere: ['PR4'] },
        { id: 'EGA', nombre: 'Expresión Gráfica Avanzada', creditos: 3, requiere: ['PR3'] },
        { id: 'CT3', nombre: 'Construcción III', creditos: 2, requiere: ['CT2'] },
        { id: 'IT1', nombre: 'Instalaciones I', creditos: 2, requiere: ['CT1', 'EST1', 'PR4'] },
        { id: 'CL6', nombre: 'Crédito de Libre Configuración VI', creditos: 1 }
      ],
      VIII: [
        { id: 'UR3', nombre: 'Urbanismo III', creditos: 4, requiere: ['UR2'] },
        { id: 'PR6', nombre: 'Proyectos VI', creditos: 8, requiere: ['PR5'] },
        { id: 'FA1', nombre: 'Fabricación I', creditos: 4, requiere: ['CT3', 'EST2', 'PR5'] },
        { id: 'EST3', nombre: 'Estructuras III', creditos: 2, requiere: ['EST2'] },
        { id: 'IT2', nombre: 'Instalaciones II', creditos: 2, requiere: ['IT1'] },
        { id: 'CL7', nombre: 'Crédito de Libre Configuración VII', creditos: 1 },
        { id: 'ELEC4', nombre: 'Curso Electivo IV', creditos: 4 }
      ],
      IX: [
        { id: 'PAI', nombre: 'Paisaje', creditos: 4, requiere: ['UR2'] },
        { id: 'PR7', nombre: 'Proyectos VII', creditos: 8, requiere: ['PR6', 'UR2'] },
        { id: 'FA2', nombre: 'Fabricación II', creditos: 4, requiere: ['FA1', 'PR6'] },
        { id: 'AP1', nombre: 'Diseño Aplicado I', creditos: 4, requiere: ['CT3', 'EST3', 'IT2', 'PR6'] },
        { id: 'IT3', nombre: 'Instalaciones III', creditos: 2, requiere: ['IT2'] },
        { id: 'CL8', nombre: 'Crédito de Libre Configuración VIII', creditos: 1 }
      ],
      X: [
        { id: 'DE', nombre: 'Deontología', creditos: 1, requiere: ['PR6'] },
        { id: 'PR8', nombre: 'Proyectos VIII', creditos: 8, requiere: ['PR7', 'UR3'] },
        { id: 'IPF', nombre: 'Introducción al Proyecto de Fin de Carrera', creditos: 2, requiere: ['PR7'] },
        { id: 'AP2', nombre: 'Diseño Aplicado II', creditos: 4, requiere: ['AP1', 'PR7'] },
        { id: 'STB', nombre: 'Sostenibilidad', creditos: 4, requiere: ['CT3', 'PR6'] },
        { id: 'LAR', nombre: 'Legislación en Arquitectura', creditos: 3, requiere: ['PR6'] }
      ]
    };

    const tbody = document.getElementById("malla-body");
    const areas = ['CURSOS']; // Una única fila, por ahora
    areas.forEach(area => {
      const tr = document.createElement("tr");
      const tdArea = document.createElement("td");
      tdArea.className = "area";
      tdArea.textContent = area;
      tr.appendChild(tdArea);

      for (let i = 1; i <= 10; i++) {
        const ciclo = ["I","II","III","IV","V","VI","VII","VIII","IX","X"][i - 1];
        const td = document.createElement("td");
        if (cursosPorSemestre[ciclo]) {
          cursosPorSemestre[ciclo].forEach(curso => {
            const div = document.createElement("div");
            div.className = "curso";
            div.dataset.id = curso.id;
            div.dataset.requiere = curso.requiere ? curso.requiere.join(',') : '';
            div.innerHTML = `${curso.id}<div class="tooltip">Créditos: ${curso.creditos}${curso.requiere ? " | Requiere: " + curso.requiere.join(", ") : ""}</div>`;
            td.appendChild(div);
          });
        }
        tr.appendChild(td);
      }
      tbody.appendChild(tr);
    });

    document.querySelectorAll('.curso').forEach(curso => {
      curso.addEventListener('mouseenter', () => {
        const reqs = curso.dataset.requiere?.split(',') || [];
        reqs.forEach(rid => {
          if (rid.trim()) {
            const el = document.querySelector(`[data-id="${rid.trim()}"]`);
            if (el) el.classList.add('requisito');
          }
        });
      });

      curso.addEventListener('mouseleave', () => {
        document.querySelectorAll('.curso').forEach(el => el.classList.remove('requisito'));
      });

      curso.addEventListener('click', () => {
        const reqs = curso.dataset.requiere?.split(',').filter(r => r.trim()) || [];
        const aprobados = Array.from(document.querySelectorAll('.curso.llevado')).map(el => el.dataset.id);
        const todosAprobados = reqs.every(r => aprobados.includes(r));
        if (reqs.length === 0 || todosAprobados) {
          curso.classList.toggle('llevado');
        } else {
          alert("Debe aprobar antes: " + reqs.join(', '));
        }
      });
    });
  </script>
</body>
</html>
