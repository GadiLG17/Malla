<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Malla Curricular Arquitectura</title>
  <style>
    body {
      font-family: sans-serif;
      background: #cff0fc;
      margin: 0;
      padding: 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px auto;
      table-layout: fixed;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      vertical-align: top;
      text-align: center;
      min-width: 110px;
    }

    th {
      background-color: #ddd;
    }

    .area {
      background-color: #e0e0e0;
      font-weight: bold;
      text-align: left;
    }

    .curso {
      position: relative;
      border-radius: 8px;
      margin: 4px 0;
      padding: 6px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
    }

    .curso:hover {
      filter: brightness(0.95);
    }

    .curso.llevado {
      background-color: #a7dcf1 !important;
      color: #003344;
      text-decoration: line-through;
    }

    .tooltip {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      display: none;
      z-index: 100;
    }

    .curso:hover .tooltip {
      display: block;
    }

    .requisito {
      outline: 2px dashed orange;
      outline-offset: -3px;
    }

    /* Colores variados */
    .color1 { background-color: #b2ebf2; }  /* celeste claro */
    .color2 { background-color: #80deea; }  /* turquesa */
    .color3 { background-color: #4dd0e1; }  /* celeste medio */
    .color4 { background-color: #26c6da; }  /* más fuerte */
    .color5 { background-color: #00bcd4; }  /* azul cielo */
  </style>
</head>
<body>
  <h1 style="text-align:center; padding: 20px;">Malla Curricular - Arquitectura (Plan 2025)</h1>
  <table>
    <thead>
      <tr>
        <th>Área / Ciclo</th>
        <th>I</th><th>II</th><th>III</th><th>IV</th><th>V</th>
        <th>VI</th><th>VII</th><th>VIII</th><th>IX</th><th>X</th>
      </tr>
    </thead>
    <tbody id="tabla-cursos">
      <!-- Cursos se generarán dinámicamente -->
    </tbody>
  </table>

  <script>
    const colores = ['color1', 'color2', 'color3', 'color4', 'color5'];

    const cursos = {
      "URBANISMO Y PAISAJE": {
        I: [], II: [], III: [], IV: [], V: ["HUR|Historia del Urbanismo"],
        VI: ["UR1|Urbanismo I"], VII: ["UR2|Urbanismo II"], VIII: ["UR3|Urbanismo III"],
        IX: ["PAI|Paisaje"], X: []
      },
      "HUMANIDADES": {
        I: ["CV1|Comunicación verbal I", "ORU|Orientación Universitaria"],
        II: ["CV2|Comunicación verbal II", "HA1|Historia de la arquitectura I"],
        III: ["AF|Antropología Filosófica", "HI1|Historia del Arte I"],
        IV: ["HI2|Historia del Arte II", "RCT|Realidad, Conocimiento y Trascendencia"],
        V: ["T1|Introducción a la Teología"],
        VI: ["T2|Teología y Vida Cristiana"],
        VII: ["DSO|Doctrina Social de la Iglesia"],
        VIII: [], IX: [], X: ["DE|Deontología"]
      },
      "CIENCIA Y TECNOLOGÍA": {
        I: ["MT1|Matemáticas I", "GD1|Geometría Descriptiva", "DA1|Dibujo arquitectónico I", "IAR|Introducción a la Arquitectura"],
        II: ["MT2|Matemáticas II", "FG|Física General", "GD2|Geometría Descriptiva II", "DA2|Dibujo Arquitectónico II"],
        III: ["FA|Física Aplicada", "CT1|Construcción I", "PR1|Proyectos I", "HA2|Historia de la Arquitectura II"],
        IV: ["EST1|Estructuras I", "HA4|Historia de la Arquitectura III", "PR2|Proyectos II", "HDA|Herramientas Digitales Aplicadas"],
        V: ["CT2|Construcción II", "HA4|Historia de la arquitectura IV", "PR3|Proyectos III"],
        VI: ["ETC|Estética", "EST2|Estructuras II", "PR4|Proyectos IV", "GPR|Gestión de Proyectos"],
        VII: ["CT3|Construcción III", "IT1|Instalaciones I", "PR5|Proyectos V", "EGA|Expresión Gráfica Avanzada"],
        VIII: ["FA1|Fabricación I", "EST3|Estructuras III", "IT2|Instalaciones II", "PR6|Proyectos VI"],
        IX: ["FA2|Fabricación II", "IT3|Instalaciones III", "AP1|Diseño Aplicado I", "PR7|Proyectos VII"],
        X: ["PR8|Curso de Trabajo de Investigación: Proyectos 8", "AP2|Diseño Aplicado II", "IPF|Introducción al Proyecto de Fin de Carrera", "STB|Sostenibilidad", "LAR|Legislación en Arquitectura"]
      },
      "ELECTIVOS": {
        I: [], II: ["CL1|Crédito de Libre Configuración I"],
        III: ["CL2|Crédito de Libre Configuración II"],
        IV: ["CL3|Crédito de Libre Configuración III", "ELEC1|Curso Electivo I"],
        V: ["CL4|Crédito de Libre Configuración IV", "ELEC2|Curso Electivo II", "COP|Conservación del Patrimonio"],
        VI: ["CL5|Crédito de Libre Configuración V", "ELEC3|Curso Electivo III"],
        VII: ["CL6|Crédito de Libre Configuración VI"],
        VIII: ["CL7|Crédito de Libre Configuración VII", "ELEC4|Curso Electivo IV"],
        IX: ["CL8|Crédito de Libre Configuración VIII"],
        X: []
      }
    };

    const requisitos = {
      CV2: ["CV1"], CT1: ["FG", "IAR"], EST1: ["FA", "MT2"], RCT: ["AF"],
      HA4: ["HA3"], CT2: ["CT1", "MT2"], COP: ["PR2"], UR1: ["HUR"], T2: ["T1"],
      PR2: [], PR3: ["PR2"], PR4: ["PR3"], PR5: ["PR4"], PR6: ["PR5"],
      PR7: ["PR6", "UR2"], PR8: ["PR7", "UR3"], IPF: ["PR7"], AP1: ["CT3", "EST3", "IT2", "PR6"],
      AP2: ["AP1", "PR7"], STB: ["CT3", "PR6"], LAR: ["PR6"], UR2: ["UR1"],
      UR3: ["UR2"], DSO: ["T2"], EGA: ["PR3"], CT3: ["CT2"], IT1: ["CT1", "EST1", "PR4"],
      IT2: ["IT1"], IT3: ["IT2"], FA1: ["CT3", "EST2", "PR5"], FA2: ["FA1", "PR6"]
    };

    const tabla = document.getElementById('tabla-cursos');

    for (const area in cursos) {
      const row = document.createElement('tr');
      const tdArea = document.createElement('td');
      tdArea.className = 'area';
      tdArea.textContent = area;
      row.appendChild(tdArea);

      for (let i = 1; i <= 10; i++) {
        const ciclo = ["I","II","III","IV","V","VI","VII","VIII","IX","X"][i - 1];
        const td = document.createElement('td');
        const listaCursos = cursos[area][ciclo] || [];

        listaCursos.forEach(item => {
          const [sigla, nombre] = item.split('|');
          const div = document.createElement('div');
          const color = colores[Math.floor(Math.random() * colores.length)];
          div.className = `curso ${color}`;
          div.setAttribute('data-id', sigla);
          div.setAttribute('data-nombre', nombre);
          const requiere = requisitos[sigla];
          if (requiere) div.setAttribute('data-requiere', requiere.join(','));

          const tooltip = document.createElement('div');
          tooltip.className = 'tooltip';
          tooltip.innerText = `Curso: ${nombre}` + (requiere ? `\nRequiere: ${requiere.join(', ')}` : "");
          div.innerText = `${sigla} - ${nombre}`;
          div.appendChild(tooltip);
          td.appendChild(div);
        });
        row.appendChild(td);
      }
      tabla.appendChild(row);
    }

    function requisitosCumplidos(ids) {
      return ids.every(id => document.querySelector(`[data-id="${id}"]`)?.classList.contains('llevado'));
    }

    document.querySelectorAll('.curso').forEach(curso => {
      curso.addEventListener('click', () => {
        const req = curso.dataset.requiere ? curso.dataset.requiere.split(',') : [];
        if (req.length === 0 || requisitosCumplidos(req)) {
          curso.classList.toggle('llevado');
        } else {
          alert("Debes aprobar primero los cursos requeridos: " + req.join(', '));
        }
      });

      curso.addEventListener('mouseenter', () => {
        const req = curso.dataset.requiere ? curso.dataset.requiere.split(',') : [];
        req.forEach(id => {
          const cursoReq = document.querySelector(`[data-id="${id}"]`);
          if (cursoReq) cursoReq.classList.add('requisito');
        });
      });

      curso.addEventListener('mouseleave', () => {
        document.querySelectorAll('.curso').forEach(c => c.classList.remove('requisito'));
      });
    });
  </script>
</body>
</html>
